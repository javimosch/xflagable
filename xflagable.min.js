var xflagable=function(a){var b={},c=function(a){if(b[a]){var c=0;b[a].cbArr=b[a].cbArr||[];for(var d in b[a].cbArr)b[a].cbArr[d].fired||(b[a].cbArr[d].fn(),b[a].cbArr[d].fired=!0,c++)}},d=function(a,e,f,g,h){var i=a,j=e;switch(i){case"create":var k=f,l=g;b[j]={};for(var m in k){var n=k[m];b[j][n]=!1}l&&d("cb",j,l);break;case"createFromArray":var o=f,p=g,l=h,k=[];for(var m in o)"undefined"!=typeof o[m][p]&&k.push(o[m][p]);if(0==k.length)return console.log("xflagable createFromArray error"),void 0;d("create",e,k,l),console.log(b);break;case"set":if(b[j]){if("string"==typeof f){var n=f,q=g;"boolean"==typeof b[j][n]&&(b[j][n]=q)}else{var r=f;for(var m in r)"boolean"==typeof b[j][m]&&(b[j][m]=r[m])}d("fireCallbacksOnFlagsRised",j)}break;case"cb":if(b[j]){var l=f;"function"==typeof l&&(l=[l]);for(var m in l)b[j].cbArr=b[j].cbArr||[],b[j].cbArr.push({fn:l[m],fired:!1})}d("fireCallbacksOnFlagsRised",j);break;case"fireCallbacksOnFlagsRised":case"rised":case"ok":case"ready":if(b[j]){var l=f;console.log(j);for(var m in b[j]){var p=b[j][m];if(!p||"function"!=typeof p&&0==p)return console.log("xflagable checking false"),!1}return console.log("xflagable checking true"),c(j),!0}break;default:console&&console.log("xflagable: action "+i+" unknown.")}};a.$flag=d,a.$xflagable=d,a.$F=d};